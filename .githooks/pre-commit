#!/usr/bin/env bash
set -euo pipefail

thought_files=()
while IFS= read -r line; do
  thought_files+=("$line")
done < <(git diff --cached --name-only --diff-filter=ACM -- _thoughts/*.md)

if [[ "${#thought_files[@]}" -eq 0 ]]; then
  exit 0
fi

bin/thought-link-metadata update "${thought_files[@]}"
